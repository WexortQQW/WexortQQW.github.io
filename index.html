<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Заказ авто деталей</title>
    <style>
        /* Ваши стили остаются без изменений */
    </style>
</head>
<body>
    <div class="container">
        <!-- Ваша HTML-разметка остается без изменений -->
    </div>

    <script>
        // Простая функция для отправки данных
        function submitToGoogleAppsScript(formData) {
            return new Promise((resolve, reject) => {
                // Замените на ваш реальный URL Google Apps Script
                const scriptUrl = 'https://script.google.com/macros/s/ВАШ_ИДЕНТИФИКАТОР/exec';
                
                // Создаем временную форму
                const tempForm = document.createElement('form');
                tempForm.method = 'POST';
                tempForm.action = scriptUrl;
                tempForm.style.display = 'none';
                
                // Добавляем данные в форму
                Object.keys(formData).forEach(key => {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.name = key;
                    input.value = formData[key];
                    tempForm.appendChild(input);
                });
                
                // Добавляем временную форму в body
                document.body.appendChild(tempForm);
                
                // Отправляем форму
                tempForm.submit();
                
                // Удаляем форму после отправки
                setTimeout(() => {
                    document.body.removeChild(tempForm);
                }, 1000);
                
                // Считаем отправку успешной
                resolve();
            });
        }
        
        // Обработчик отправки формы
        document.getElementById('orderForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Показать индикатор загрузки
            document.getElementById('loading').style.display = 'block';
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
            
            // Собрать данные формы
            const formData = {
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value.replace(/\D/g, ''),
                email: document.getElementById('email').value,
                carBrand: document.getElementById('carBrand').value,
                carModel: document.getElementById('carModel').value,
                year: document.getElementById('year').value,
                partName: document.getElementById('partName').value,
                partNumber: document.getElementById('partNumber').value,
                quantity: document.getElementById('quantity').value,
                comments: document.getElementById('comments').value,
                timestamp: new Date().toLocaleString('ru-RU')
            };
            
            try {
                // Отправляем данные
                await submitToGoogleAppsScript(formData);
                
                // Показать сообщение об успехе
                document.getElementById('successMessage').style.display = 'block';
                document.getElementById('orderForm').reset();
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('errorMessage').style.display = 'block';
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        });
        
        // Добавляем маску для телефона
        document.getElementById('phone').addEventListener('input', function(e) {
            const value = e.target.value.replace(/\D/g, '');
            let formattedValue = '';
            
            if (value.length > 0) {
                formattedValue = '+7 (' + value.substring(1, 4);
            }
            if (value.length >= 4) {
                formattedValue += ') ' + value.substring(4, 7);
            }
            if (value.length >= 7) {
                formattedValue += '-' + value.substring(7, 9);
            }
            if (value.length >= 9) {
                formattedValue += '-' + value.substring(9, 11);
            }
            
            e.target.value = formattedValue;
        });
    </script>
</body>
</html>
